---
id: 2971
title: How to change SCOM reporting to use Kerberos instead of NTLM
date: 2013-04-30T12:06:09+10:00
author: alexandre@verkinderen.com

guid: http://scug.be/scom/?p=703
sc_member_order:
  - "0"
  - "0"
  - "0"
  - "0"
post_views_count:
  - "3049"
  - "3049"
  - "3049"
categories:
  - SystemCenter
  - Uncategorized
tags:
  - Issue
  - kerberos
  - reporting
  - scom
  - scom 2012
  - system center
---
One of the Domain admins at one of my customers was complaining about all the NTLM request generated by the scom server to the reporting server. One of the issues with NTLM is that you need to re-authenticate every time, with Kerberos you receive a ticket that is valid for a longer period of time (by default 10hours). You can find more info about NTLM VS Kerberos here: [http://blogs.technet.com/b/authentication/archive/2006/04/07/ntlm-s-time-has-passed.aspx](http://blogs.technet.com/b/authentication/archive/2006/04/07/ntlm-s-time-has-passed.aspx "http://blogs.technet.com/b/authentication/archive/2006/04/07/ntlm-s-time-has-passed.aspx")&#160;

&#160;

All the SQL servers at this customer are configured to use Kerberos but apparently when the SCOM reporting is being installed and modifying the RSReportServer config file it will change the authentication method as well back to NTLM!! Although Microsoft is recommending Kerberos over NTLM for almost 10 years now, new products like SCOM 2012 are still using NTLM!!

&#160;

To change the report server authentication settings, edit the XML elements and values in the RSReportServer.config file.

You can find the file in the following location: C:Program FilesMicrosoft SQL ServerMSRS10_50.MSSQLSERVERReporting ServicesReportServer

&#160;

[<img title="clip_image002" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; display: inline; padding-right: 0px" border="0" alt="clip_image002" src="https://mscloudstorage.blob.core.windows.net/mscloudstorage//2013/04/clip_image002_thumb.jpg" width="644" height="100" />](https://mscloudstorage.blob.core.windows.net/mscloudstorage//2013/04/clip_image002.jpg)

Change the setting from RSWindowsNTLM to RSWindowsNegotiate

[<img title="clip_image004" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; margin: 0px 0px 15px; border-left: 0px; display: inline; padding-right: 0px" border="0" alt="clip_image004" src="https://mscloudstorage.blob.core.windows.net/mscloudstorage//2013/04/clip_image004_thumb.jpg" width="644" height="151" />](https://mscloudstorage.blob.core.windows.net/mscloudstorage//2013/04/clip_image004.jpg)

&#160;

![Important note](http://i.msdn.microsoft.com/areas/global/content/clear.gif "Important note") **Important**

Using RSWindowsNegotiate will result in a Kerberos authentication error if you configured the Report Server service to run under a domain user account and you did not register a Service Principal Name (SPN) for the account. Make sure to create the SPN for the SQL reporting service as described here: [http://blogs.technet.com/b/stefan_stranger/archive/2012/07/31/opsmgr-2012-what-should-the-spn-s-look-like-visual-representation.aspx](http://blogs.technet.com/b/stefan_stranger/archive/2012/07/31/opsmgr-2012-what-should-the-spn-s-look-like-visual-representation.aspx "http://blogs.technet.com/b/stefan_stranger/archive/2012/07/31/opsmgr-2012-what-should-the-spn-s-look-like-visual-representation.aspx")

&#160;

Thanks,

Alex

<hr align="center" size="3" width="100%" />
